"use strict";function _defineProperties(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var Slider=function t(i){var e,n,o,r,c=this;if(_classCallCheck(this,t),this.containerId=i.containerId,this.containerPosition=i.containerPosition,this.images=i.images,this.transitionTime=i.transitionTime,this.transitionDirectionX=i.transitionDirectionX,this.transitionDirectionY=i.transitionDirectionY,this.transitionZoom=i.transitionZoom,this.bullets=i.bullets,this.bulletColor=i.bulletColor,this.bulletsHide=i.bulletsHide,this.arrows=i.arrows,this.arrowsHide=i.arrowsHide,this.swipe=i.swipe,this.auto=i.auto,this.autoTime=i.autoTime,this.currentIndex=0,this.sliderLock=!1,this.imageElements=[],this.transitionTime=this.transitionTime?this.transitionTime:250,this.containerPosition="string"==typeof this.containerPosition?this.containerPosition:null,this.bullets="boolean"==typeof this.bullets&&this.bullets,this.bulletsHide=!("boolean"!=typeof this.bulletsHide||!this.bullets)&&this.bulletsHide,this.arrows="boolean"==typeof this.arrows&&this.arrows,this.arrowsHide=!("boolean"!=typeof this.arrowsHide||!this.arrows)&&this.arrowsHide,this.swipe="boolean"==typeof this.swipe&&this.swipe,this.auto="boolean"==typeof this.auto&&this.auto,this.autoTime="number"==typeof this.autoTime?this.autoTime:1e4,this.bulletColor){this.bulletColor=(e=this.bulletColor,(n=(new Option).style).color=e,n.color==e?this.bulletColor:"red")}else this.bulletColor="red";if(Array.isArray(this.images)||(this.images=null),!document.getElementById(this.containerId))throw"Slider error: conatinerId must be a valid element's id";var s,l=0;if(this.container=document.getElementById(this.containerId),!this.images){this.images=[];var a=this.container.children;[].forEach.call(a,function(t){r=null,"A"===t.tagName&&(t=(r=t).firstElementChild),"IMG"===t.tagName?(c.images[l]={},c.images[l].imageUrl=t.src,r&&(c.images[l].linkUrl=r.href,c.images[l].linkNewTab="_blank"===r.target),l++):console.log("Slider error: invalid container child tag name: "+t.tagName)})}if(this.container.innerHTML="",this.images.forEach(function(t,i){"string"==typeof t&&(t={imageUrl:t,linkUrl:null,linkNewTab:null}),(o=document.createElement("IMG")).id=c.containerId+"-slide-"+i,o.src=t.imageUrl,o.classList.add("russunit-slider-image"),o.style.margin="auto",o.style.maxWidth="100%",o.style.position="absolute",o.style.top=0,(o.style.left=0)<i?(o.style.visibility="hidden",o.style.zIndex=0):o.style.zIndex=2,c.container.appendChild(o),i===c.images.length-1&&(o.onload=function(){c.container.style.width=Math.min(o.naturalWidth,window.innerWidth),c.container.style.height=Math.min(o.naturalHeight,window.innerHeight),c.container.style.width=o.clientWidth,c.container.style.height=o.clientHeight}),c.imageElements[i]=o}),this.images.length<1)throw"Slider error: no images found for slides.";this.container.classList.add("russunit-slider-container"),this.container.style.marginLeft="auto",this.container.style.marginRight="auto",this.container.style.maxWidth="100%",this.container.style.display="flex",this.container.style.overflow="hidden",this.container.style.position="relative",this.arrows&&(this.leftArrow=document.createElement("SPAN"),this.leftArrow.id=this.containerId+"-arrow-left",this.leftArrow.classList.add("russunit-slider-arrow"),this.leftArrow.classList.add("russunit-slider-arrow-left"),this.leftArrow.style.zIndex=6,this.leftArrow.style.color="#fff",this.leftArrow.style.fontSize="2em",this.leftArrow.style.margin="auto auto auto 10px",this.leftArrow.style.cursor="pointer",this.leftArrow.innerHTML="&lt;",this.container.appendChild(this.leftArrow)),this.bullets&&(this.bulletContainer=document.createElement("DIV"),this.bulletContainer.id=this.containerId+"-bullet-container",this.bulletContainer.classList.add("russunit-slider-bullet-container"),this.bulletContainer.style.zIndex=6,this.bulletContainer.style.position="relative",this.bulletContainer.style.margin="auto auto 0",this.bulletContainer.style.textAlign="center",this.container.appendChild(this.bulletContainer),this.bullets=[],this.imageElements.forEach(function(t,i){(s=document.createElement("SPAN")).id=c.containerId+"-bullet-"+i,s.classList.add("russunit-slider-bullet"),s.style.color="#fff",s.style.zIndex=10,s.style.fontSize="2em",s.style.margin="0 5px",s.style.cursor="pointer",s.innerHTML="&bull;",0===i&&(s.style.color=c.bulletColor),c.bullets[i]=s,c.bulletContainer.appendChild(s)}),this.bulletsHide&&(this.bulletContainer.style.visibility="hidden",this.bulletContainer.style.opacity=0,this.bulletContainer.style.transition="visibility 0.3s linear,opacity 0.3s linear",this.container.addEventListener("mouseenter",function(){c.bulletContainer.style.visibility="visible",c.bulletContainer.style.opacity=1}),this.container.addEventListener("mouseleave",function(){c.bulletContainer.style.visibility="hidden",c.bulletContainer.style.opacity=0})));if(this.arrows&&(this.rightArrow=document.createElement("SPAN"),this.rightArrow.id=this.containerId+"-arrow-right",this.rightArrow.classList.add("russunit-slider-arrow"),this.rightArrow.classList.add("russunit-slider-arrow-right"),this.rightArrow.style.zIndex=6,this.rightArrow.style.color="#fff",this.rightArrow.style.fontSize="2em",this.rightArrow.style.margin="auto 10px auto auto",this.rightArrow.style.cursor="pointer",this.rightArrow.innerHTML="&gt;",this.container.appendChild(this.rightArrow)),this.arrows&&this.arrowsHide&&(this.leftArrow.style.visibility="hidden",this.leftArrow.style.opacity=0,this.leftArrow.style.transition="visibility 0.3s linear,opacity 0.3s linear",this.rightArrow.style.visibility="hidden",this.rightArrow.style.opacity=0,this.rightArrow.style.transition="visibility 0.3s linear,opacity 0.3s linear",this.container.addEventListener("mouseenter",function(){c.leftArrow.style.visibility="visible",c.leftArrow.style.opacity=1,c.rightArrow.style.visibility="visible",c.rightArrow.style.opacity=1}),this.container.addEventListener("mouseleave",function(){c.leftArrow.style.visibility="hidden",c.leftArrow.style.opacity=0,c.rightArrow.style.visibility="hidden",c.rightArrow.style.opacity=0})),this.resizeContainer=function(){c.container.style.width=c.container.parentNode.clientWidth;var t=c.imageElements[0].naturalWidth/c.imageElements[0].naturalHeight;c.container.style.height=parseFloat(c.container.style.width.replace("px",""))/t},window.addEventListener("resize",this.resizeContainer),this.slideFadeOut=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];"function"!=typeof i&&(i=function(){}),"string"==typeof t&&(t=document.getElementById(t));e.waitTime=!!e.waitTime&&e.waitTime,e.fadeTime=e.fadeTime?e.fadeTime:500,e.toggleVisibility=!!e.toggleVisibility&&e.toggleVisibility,e.directionX=e.directionX?e.directionX:null,e.directionY=e.directionY?e.directionY:null,e.zoom=e.zoom?e.zoom:null;var n=e.toggleVisibility?function(t){return"hidden"!==t.style.visibility}:function(t){return"none"!==t.style.display},o=e.toggleVisibility?function(t){t.style.visibility="hidden"}:function(t){t.style.display="none"};if(t)if(n(t)){var r,s,l;if(e.directionX)switch(e.directionX=["left","right","random"].includes(e.directionX)?e.directionX:null,"random"===e.directionX&&(e.directionX=["right","left",null][Math.floor(3*Math.random())]),e.directionX){case"right":r=1;break;case"left":r=-1}if(e.directionY)switch(e.directionY=["up","down","random"].includes(e.directionY)?e.directionY:null,"random"===e.directionY&&(e.directionY=["up","down",null][Math.floor(3*Math.random())]),e.directionY){case"up":s=-1;break;case"down":s=1}if(e.zoom)switch(e.zoom=["in","out","random"].includes(e.zoom)?e.zoom:null,"random"===e.zoom&&(e.zoom=["in","out",null][Math.floor(3*Math.random())]),e.zoom){case"in":l=.005;break;case"out":l=-.005}if(e.waitTime)e.waitTime=!0===e.waitTime?2e3:e.waitTime,e.waitTime="number"==typeof e.waitTime?e.waitTime:2e3,setTimeout(function(){e.waitTime=!1,c.slideFadeOut(t,i,e)},e.waitTime);else{e.fadeTime="number"==typeof e.fadeTime?e.fadeTime:500;var a=20/e.fadeTime;t.style.opacity=1;var h=setInterval(function(){0<t.style.opacity?(t.style.opacity-=a,e.directionX&&(t.style.left=parseFloat(t.style.left.replace("px",""))+r+"px"),e.directionY&&(t.style.top=parseFloat(t.style.top.replace("px",""))+s+"px"),e.zoom&&(t.style.transform||(t.style.transform="scale(1)"),t.style.transform="scale("+(parseFloat(t.style.transform.replace("scale(","").replace(")",""))+l)+")")):(clearInterval(h),o(t),t.style.top=0,t.style.left=0,t.style.transform="scale(1)",i())},20)}}else i();else console.log("fadeOut error: no such element exists.")},this.getNextIndex=function(){return(c.currentIndex+1)%c.imageElements.length},this.getPrevIndex=function(){return c.currentIndex<1?c.imageElements.length-1:c.currentIndex-1},this.nextSlide=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;c.goToSlide(c.getNextIndex(),t)},this.prevSlide=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;c.goToSlide(c.getPrevIndex(),t)},this.setSlideLink=function(t){c.linkOverlay&&(c.container.removeChild(c.linkOverlay),c.linkOverlay=null),c.images[t].linkUrl&&(c.linkOverlay=document.createElement("DIV"),c.linkOverlay.id=c.containerId+"-link-overlay",c.linkOverlay.classList.add("russunit-slider-link-overlay"),c.linkOverlay.style.zIndex=5,c.linkOverlay.style.position="absolute",c.linkOverlay.style.top=0,c.linkOverlay.style.left=0,c.linkOverlay.style.width="100%",c.linkOverlay.style.height="100%",c.linkOverlay.style.cursor="pointer",c.images[t].linkNewTab?c.linkOverlay.addEventListener("click",function(){window.open(c.images[t].linkUrl,"_blank")}):c.linkOverlay.addEventListener("click",function(){window.location.href=c.images[t].linkUrl}),c.container.appendChild(c.linkOverlay))},this.transitionSlide=function(t,i){c.imageElements[t].style.zIndex=1,c.imageElements[t].style.opacity=1,c.imageElements[t].style.visibility="visible",c.slideFadeOut(c.imageElements[c.currentIndex],function(){c.imageElements[c.currentIndex].style.zIndex=0,c.imageElements[t].style.zIndex=2,i()},{toggleVisibility:!0,fadeTime:c.transitionTime,directionX:c.transitionDirectionX,directionY:c.transitionDirectionY,zoom:c.transitionZoom})},this.goToSlide=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if("number"!=typeof t||t<0||t+1>c.imageElements.length)console.log("Slider error: invalid index in goToSlide: "+t),"function"==typeof i&&i();else if(t===c.currentIndex)console.log("Slider error: current index in goToSlide: "+t),"function"==typeof i&&i();else if(c.sliderLock)console.log("Slider error: slider is locked.");else{c.bullets&&(c.bullets[c.currentIndex].style.color="#fff",c.bullets[t].style.color=c.bulletColor);c.sliderLock=!0,c.transitionSlide(t,function(){c.currentIndex=t,c.setSlideLink(t),c.sliderLock=!1,"function"==typeof i&&i()})}},this.bullets&&this.imageElements.forEach(function(t,i){c.bullets[i].addEventListener("click",function(t){c.goToSlide(i),t.stopPropagation()})}),this.arrows&&(this.leftArrow.addEventListener("click",function(t){c.prevSlide(),t.stopPropagation()}),this.rightArrow.addEventListener("click",function(t){c.nextSlide(),t.stopPropagation()})),this.setSlideLink(this.currentIndex),this.swipe){var h=new Swipe(this.container);h.onLeft(function(){var t={x:c.transitionDirectionX,y:c.transitionDirectionY,z:c.transitionZoom};c.transitionDirectionX="left",c.transitionDirectionY=!1,c.transitionZoom=!1,c.nextSlide(function(){c.transitionDirectionX=t.x,c.transitionDirectionY=t.y,c.transitionZoom=t.z})}),h.onRight(function(){var t={x:c.transitionDirectionX,y:c.transitionDirectionY,z:c.transitionZoom};c.transitionDirectionX="right",c.transitionDirectionY=!1,c.transitionZoom=!1,c.prevSlide(function(){c.transitionDirectionX=t.x,c.transitionDirectionY=t.y,c.transitionZoom=t.z})}),h.run()}this.auto&&setInterval(this.nextSlide,this.autoTime)},Swipe=function(){function e(t){var i=this;_classCallCheck(this,e),this.xDown=null,this.yDown=null,this.element="string"==typeof t?document.querySelector(t):t,this.element.addEventListener("touchstart",function(t){i.xDown=t.touches[0].clientX,i.yDown=t.touches[0].clientY},!1)}return _createClass(e,[{key:"onLeft",value:function(t){return this.onLeft=t,this}},{key:"onRight",value:function(t){return this.onRight=t,this}},{key:"onUp",value:function(t){return this.onUp=t,this}},{key:"onDown",value:function(t){return this.onDown=t,this}},{key:"handleTouchMove",value:function(t){if(this.xDown&&this.yDown){var i=t.touches[0].clientX,e=t.touches[0].clientY;this.xDiff=this.xDown-i,this.yDiff=this.yDown-e,Math.abs(this.xDiff)>Math.abs(this.yDiff)?0<this.xDiff?this.onLeft():this.onRight():0<this.yDiff?this.onUp():this.onDown(),this.xDown=null,this.yDown=null}}},{key:"run",value:function(){var i=this;this.element.addEventListener("touchmove",function(t){i.handleTouchMove(t)},!1)}}]),e}();